import  json

import requests

jsonData = {"Device": ["test1"], "Acq Date": ["2017-09-06"], "Acq Time": ["11-23-48"], "Time step": ["1.0"], "Voc": ["0.98"], "Jsc": ["0.000384868423813578"], "MPP": ["0.00037717105533730644"], "FF": ["100.0"], "effic": ["2.7733165833625476e-07"], "V": [0.0, 0.02, 0.04, 0.06, 0.08, 0.1, 0.12, 0.14, 0.16, 0.18, 0.2, 0.22, 0.24, 0.26, 0.28, 0.3, 0.32, 0.34, 0.36, 0.38, 0.4, 0.42, 0.44, 0.46, 0.48, 0.5, 0.52, 0.54, 0.56, 0.58, 0.6, 0.62, 0.64, 0.66, 0.68, 0.7000000000000001, 0.72, 0.74, 0.76, 0.78, 0.8, 0.8200000000000001, 0.84, 0.86, 0.88, 0.9, 0.92, 0.9400000000000001, 0.96, 0.98], "J": [0.000384868423813578, 0.0003848683875455339, 0.0003848683381236784, 0.0003848682707775497, 0.00038486817900623693, 0.00038486805395121504, 0.0003848678835411956, 0.0003848676513266702, 0.00038486733489245806, 0.00038486690369360366, 0.0003848663161072352, 0.0003848655154146119, 0.00038486442432611456, 0.00038486293752076906, 0.0003848609114797119, 0.0003848581506325499, 0.0003848543884791833, 0.0003848492618650501, 0.0003848422759265002, 0.0003848327563223397, 0.00038481978414073303, 0.00038480210719815666, 0.0003847780191682526, 0.00038474519487285974, 0.0003847004658364406, 0.0003846395144381787, 0.00038455645713919573, 0.00038444327655429156, 0.0003842890475465044, 0.0003840788826419139, 0.00038379249496567347, 0.0003834022399836212, 0.00038287044702017825, 0.00038214578296991153, 0.0003811582971964822, 0.00037981266931230717, 0.00037797900805730533, 0.00037548031310774554, 0.00037207538952443997, 0.0003674355655994832, 0.0003611129667135393, 0.0003524972827308459, 0.0003407568557594609, 0.00032475840157447644, 0.00030295761554394174, 0.0002732501034272694, 0.00023276824763884818, 0.00017760440080988316, 0.00010243368697515631, 0.0], "Acq Min Voltage": [0.0], "Acq Max Voltage": [1.0], "Acq Start Voltage": [0.0], "Acq Step Voltage": [0.02], "Acq Num Aver Scans": [5.0], "Delay Before Meas": [1.0], "Num Track Points": [5], "Track Interval": [2.0], "Operator": [""], "Comments": [""]}


# This is for using POST HTTP
print("testing submission to DM via HTTP POST")
url = "http://gridedgedm.mit.edu:3000/api/Measurements"

r1 = requests.get(url)
print(r1.status_code)

r = requests.post(url, json=jsonData)
r.raise_for_status()
print(r.status_code)
print(r.headers['ETag'])
